<div flex layout-fill>
    <div flex="100" layout="row" style="padding:0px;background-color:#f6f6f6">
        <div flex="none" layout-wrap layout="row" layout-align="start center"
             style="padding-left:10px;font-size:14px;line-height:24px;border-bottom:1px solid #ccc">
            <h5>PIPELINES</h5>
        </div>
        <div flex="none" layout-wrap layout="row" layout-align="start center"
             style="padding-left:10px;font-size:14px;line-height:24px;border-bottom:1px solid #ccc">
            <md-button class="md-accent" ng-click="showPipelineCategoriesDialog()">Manage Categories</md-button>
        </div>
        <div layout-fill>
            <md-tabs md-dynamic-height md-border-bottom>
                <md-tab label="All Pipelines" md-on-select="setSelectedTab('')"></md-tab>
                <md-tab label="{{pipelineCategory.categoryName}}" md-on-select="setSelectedTab(pipelineCategory._id)"
                        ng-repeat="pipelineCategory in pipelineCategories"></md-tab>
            </md-tabs>
        </div>

    </div>

    <div class="container-fluid">
        <div>
            <md-content layout-padding>
                <md-list>

                    <div layout="row" layout-align="center center" layout-padding class="md-with-secondary">
                        <span flex="10"><b>Run/Stop</b></span>
                        <span flex="35"><b>Name/Description</b></span>
                        <div flex layout="row" layout-align="center center">
								<span flex flex-order="1" layout="row" layout-align="center center">
									<span><b>Inspect</b></span>
								</span>
								<span flex flex-order="2" layout="row" layout-align="center center">
									<span><b>Modify</b></span>
								</span>
								<span flex flex-order="3" layout="row" layout-align="center center">
									<span><b>Status</b></span>
								</span>
								<span flex flex-order="4" layout="row" layout-align="center center">
									<span><b>Delete</b></span>
								</span>
                        </div>
                    </div>
                    <md-divider></md-divider>
                    <div layout="column"
                         ng-repeat="pipeline in pipelines | pipelineCategoryFilter: activeCategory | orderBy:'+name'">
                        <md-list-item layout="row" class="md-with-secondary">
                            <md-button flex="10" ng-click="startPipeline(pipeline._id)" class="md-icon-button"
                                       ng-disabled="starting" ng-if="!pipeline.running">
                                <md-icon md-svg-icon="av:ic_play_arrow_24px" aria-label="Start"
                                         class="md-accent"></md-icon>
                            </md-button>
                            <md-button flex="10" ng-click="stopPipeline(pipeline._id)" class="md-icon-button"
                                       ng-disabled="stopping" ng-if="pipeline.running">
                                <md-icon md-svg-icon="av:ic_stop_24px" aria-label="Stop" class="md-accent"></md-icon>
                            </md-button>
                            <div class="md-list-item-text" flex="35" layout="column">
                                <h4 style="margin-bottom:0px;">{{pipeline.name}}</h4>
                                <h5>{{pipeline.description != '' ? pipeline.description : '-'}}</h5>
                            </div>
                            <div flex layout="row">
								<span flex flex-order="1" layout="row" layout-align="center center">
									<md-button ng-click="showPipeline(pipeline)" class="md-icon-button"><md-icon
                                            md-svg-icon="action:ic_search_24px" aria-label="Inspect"
                                            class="md-accent"></md-icon></md-button>
								</span>
								<span flex flex-order="2" layout="row" layout-align="center center">
									<md-button ng-click="modifyPipeline(pipeline._id)" class="md-icon-button"><md-icon
                                            md-svg-icon="editor:ic_mode_edit_24px" aria-label="Modify"
                                            class="md-accent"></md-icon></md-button>
								</span>
								<span flex flex-order="3" layout="row" layout-align="center center">
									<md-button ng-click="getPipelineStatus(pipeline)" class="md-icon-button"><i
                                            class="material-icons md-accent"
                                            style="color: rgb(255,64,129);">help</i></md-button>
								</span>
								<span flex flex-order="4" layout="row" layout-align="center center">
									<md-button ng-click="deletePipeline($event, pipeline._id)" class="md-icon-button"><md-icon
                                            md-svg-icon="action:ic_delete_24px"
                                            aria-label="Delete"></md-icon></md-button>
								</span>
                            </div>


                        </md-list-item>
                        <md-divider ng-if="!$last"></md-divider>
                        <div layout="column" ng-show="pipeline.displayStatus"
                             style="min-height:100px; background-color: #f6f6f6; padding:5px;padding-left:15px;">

                            <div flex="100" layout="column" ng-repeat="status in pipelineStatus[pipeline._id]">
                                <div flex="100" layout="row">
                                    <div flex="20"><h4>{{status.timestamp | date:'dd.MM.yyyy HH:mm'}}</h4></div>
                                    <div flex="20"><h4>{{status.messageType}}</h4></div>
                                    <div flex="60"><h4>{{status.message}}</h4></div>
                                </div>
                            </div>

                        </div>
                        <div layout="row" ng-show="pipeline.display"
                             style="min-height:200px; background-color: #f6f6f6">
							<span flex flex-order="1" layout="column" layout-align="center start">
								<span class="stream pipeline-display-element md-whiteframe-z2 tt"
                                      ng-repeat="stream in pipeline.streams" my-stream-data-and-image-bind>
								</span>
							</span>
							<span flex flex-order="2" layout="row" layout-align="start center">
								<span class="sepa pipeline-display-element md-whiteframe-z2 tt"
                                      my-sepa-data-and-image-bind ng-repeat="sepa in pipeline.sepas">
								</span>
							</span>
							<span flex flex-order="3" layout="row" layout-align="start center">
								<span class="action pipeline-display-element md-whiteframe-z2 tt"
                                      my-action-data-and-image-bind ng-repeat="action in pipeline.actions">
								</span>
							</span>

                        </div>
                    </div>
                </md-list>
            </md-content>
        </div>
    </div>


</div>
