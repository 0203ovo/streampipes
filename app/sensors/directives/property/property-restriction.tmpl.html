<div ng-repeat="(key2, property) in restriction.eventSchema.eventProperties track by $index">
    <collapsible title-label="'Property ' +(key2+1)" list="restriction.eventSchema.eventProperties" index="key"
                 disabled="disabled" removable="!disabled" collapsible="true" subtitle="true" layout-fill>
        <md-checkbox ng-checked="datatypeRestricted(property)" ng-disabled="disabled"
                     ng-click="toggleDatatypeRestriction(property)" aria-label="Datatype requirement">
            Requires datatype
        </md-checkbox>

        <div ng-show="datatypeRestricted(property)" class="md-padding-left">
            <datatype-property runtime-type="property.properties.runtimeType" dp-mode="'restriction'"
                               disabled="disabled">
            </datatype-property>
        </div>
        <md-checkbox ng-checked="domainPropertyRestricted(property)"
                     ng-click="toggleDomainPropertyRestriction(property)" aria-label="Domain property requirement"
                     ng-disabled="disabled">
            Requires domain property
        </md-checkbox>
        <div ng-show="domainPropertyRestricted(property)" class="md-padding-left">
            <domain-property property="property.properties.domainProperties[0]" disabled="disabled"></domain-property>
        </div>
        <advanced-settings index="$index">
            <md-checkbox ng-checked="measurementUnitRestricted(property)"
                         ng-click="toggleMeasurementUnitRestriction(property)" aria-label="Measurement unit requirement"
                         ng-disabled="disabled">
                Requires measurement unit
            </md-checkbox>
            <div ng-show="measurementUnitRestricted(property)" class="md-padding-left">
                <measurement-unit disabled="disabled" property="property.properties.measurementUnit"
                                  style="width:100%;"></measurement-unit>
            </div>
        </advanced-settings>
    </collapsible>
</div>
<md-button class="md-accent" ng-disabled="disabled" ng-click="addPropertyRestriction(key, restriction)">Add property
    requirement
</md-button>